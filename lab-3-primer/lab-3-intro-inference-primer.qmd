---
title: "Lab 3: Introduction to Inference Primer"
format: 
  live-html:
    webr:
      packages: 
        - ggformula
        - mosaic
        - tidyverse
      resources: 
        - https://raw.githubusercontent.com/csumb-stats-ds/stat-250-lab-primers/refs/heads/main/lab-3-primer/penny-age-2019.csv
      cell-options:
        warning: true
        completion: false
execute: 
  warning: false
  message: false
  echo: true
code-copy: true
code-overflow: wrap
toc: true
number-sections: true
css: ../styles.css
---


{{< include ../_extensions/r-wasm/live/_knitr.qmd >}}
{{< include ./_extensions/r-wasm/live/_gradethis.qmd >}}

```{webr}
#| label: theme
#| include: false
#| edit: false
library(ggplot2)
theme_set(theme_light())
options(ggplot2.continuous.color = scale_color_viridis_c, 
        ggplot2.continuous.fill = scale_fill_viridis_c,
        ggplot2.discrete.color = scale_color_viridis_d,
        ggplot2.discrete.fill = scale_fill_viridis_d)
```


```{r}
#| label: setup-checkdown
#| include: false
library(checkdown)
```


::: {.callout-note collapse="true"}
## Digital Accessibility

Please note that all images were created with modifications to the defaults to make them digitally accessible. If you recreate this code in another environment, your plots have different colors and backgrounds.
:::


## Getting Setup

 **Reminder**: Before starting, load the `ggformula` and `mosaic` packages we need for statistical and graphical functions using the `library()` function in the code chunk below. Replace `__graphics package__` and `__stats package__` with the package names.  

```{webr}
#| label: setup
#| exercise: ex-set
library(tidyverse) #data management
library(__graphics package__)
library(__stats package__)
```

::: {.solution exercise="ex-set"}

#### Solution

```{webr}
#| exercise: ex-set
#| solution: true
library(tidyverse) #data management
library(ggformula)
library(mosaic)
```

:::

```{webr}
#| exercise: ex-set
#| check: true
gradethis::grade_this_code()
```




## Penny Age 

Coins are stamped with the year in which they were minted, and stay in circulation until they are too worn, at which point they are removed from circulation. With the rising cost of raw materials, it is more expensive to manufacture pennies than the coin is worth. Furthermore, as the US moves towards a more cashless society, the use of physical coins is declining, making the penny less necessary. On May 22, 2025, The U.S. Treasury Department announced it would end penny production starting in 2026. We are going to estimate the mean age of all circulating U.S. pennies. Rolls of pennies were collected from a bank in Marina, California in Spring 2020. The data of the age of the penny (in number of years) since 2019 can be found in `penny-age-2019.csv`.   

<!-- A prior study several decades ago on pennies found the population mean age of a circulating coin was $\mu=12.264$, with a population standard deviation of $\sigma=9.608$. Given the rise of card and electronic payment methods which might decrease how often cash is used, we are going to investigate if the mean age of all circulating U.S. coins has increased. Let's see if the mean age of the coins you sampled is greater from the standard of 12.264 years. -->

### Import the Data

Complete the code below to (1) read in the csv file `penny-age-2019.csv` and store it as the object `penny`, and (2) print the variable names.  Replace the ___underscored___ sections of the code with data file name and function.

```{webr}
#| label: read-data
#| exercise: ex-read
penny <- read_csv("_____filename_____")
_____function_____(penny)
```


::: {.solution exercise="ex-read"}

#### Solution

```{webr}
#| exercise: ex-read
#| solution: true
penny <- read_csv("penny-age-2019.csv")
names(penny)
```

:::

```{webr}
#| exercise: ex-read
#| check: true
gradethis::grade_this_code()
```



### Visualize the Data

Use `gf_histogram()` to create a histogram of the sample distribution, being sure to label axes appropriately. Replace the underscored components. With good labels such as:  

- `"Age in Years of US Pennies from Marina, CA Bank (Sp 2020)"`
- `"Number of Pennies"`


```{webr}
#| label: histogram
#| exercise: ex-hist
__goal__(~ __variable__, data = __dataframe__,
         xlab = "__x axis label__",
         ylab = "__y axis label__")
```

::: {.solution exercise="ex-hist"}

#### Solution

```{webr}
#| exercise: ex-hist
#| solution: true
gf_histogram(~ age, data = penny,
         xlab = "Age in Years of US Pennies from Marina, CA Bank (Sp 2020)",
         ylab = "Number of Pennies)
```

:::

```{webr}
#| exercise: ex-hist
#| check: true
gradethis::grade_this_code()
```



### Calculate Summary Statistics 

Use `df_stats()` to calculate the descriptive statistics. Replace is the underscored components.  

```{webr}
#| label: summary-stats
#| exercise: ex-stats
__goal__(~ __variable__, data = __dataframe__)
```


::: {.solution exercise="ex-stats"}

#### Solution

```{webr}
#| exercise: ex-stats
#| solution: true
df_stats(~ age, data = penny)
```

:::

```{webr}
#| exercise: ex-stats
#| check: true
gradethis::grade_this_code()
```





### Check Your Undertanding

#### What do the following symbols represent? Arrange the descriptions in order.

1. $\mu$  
2. $\bar{x}$  
3. $s$  
4. $n$ 

```{r}
#| label: id-symbols
#| echo: false
check_question(answer = c("Population Mean", 
                          "Sample Mean", 
                          "Sample Standard Deviation", 
                          "Sample Size"), 
               type = "in_order", alignment = "vertical")
```
<br>



#### Identify the population of interest.  

```{r}
#| label: population
#| echo: false
check_question(answer = "all US pennies", 
               options = c("all coins", 
                           "all US coins", 
                           "all US pennies", 
                           "all US pennies from the Marina bank"), 
               type = "radio")
```
<br>


<!-- Check the conditions for constructing a confidence interval on your data. The conditions are listed, you just need to answer if they were met and justify why in the context of the question, including context or evidence from your study. -->

<!-- > 1. Random sample: [Met?]; [Justification]   -->
<!--   2. Normality or Sufficient sample size:  [Met?] -->
<!--       2a. Is the sample from a Normally distributed population or does the sample data have a roughly bell-shaped or symmetric distribution? [Yes / No]; [Justification]        -->
<!--       2b. Is the sample size sufficient? [Yes / No]; [Justification] -->
      

### Construct a Confidence Interval

Let's use a model to find a 95% confidence interval.    

- Go to: [Confidence Interval Applet](http://www.rossmanchance.com/applets/2021/tbia/TBIA.html)  
- Change the scenario to 'one mean'  
- Enter your sample's $n$, $\bar{x}$, and $s$ into the fields, then 'calculate'  
- Click "Confidence Interval".  
- Enter the correct confidence level.  
- Click 'Calculate.'  
- The confidence interval and degrees of freedom are displayed.  

Record the calculated confidence interval and degrees of freedom that is returned.  Keep all 4 decimal places in your answers.  
<!-- > CI = (____, ____), df = ____ -->

#### Lower bound:
```{r}
#| label: lower-bound
#| echo: false
check_question(answer = 15.3840, right = "correct", wrong = "not correct")
```

#### Upper bound: 
```{r}
#| label: upper-bound
#| echo: false
check_question(answer = 17.3045, right = "correct", wrong = "not correct")
```

#### df:
```{r}
#| label: degree-freedom
#| echo: false
check_question(answer = 1004, right = "correct", wrong = "not correct")
```
<br>



#### Arrange the words to **interpret** your confidence interval in the context of the question.

<!-- > Based on a sample, we are **[insert confidence level]** that the **[write parameter of interest]** is a single value between **[insert lower bound value]** and **[insert upper bound value]** **[insert units]**.     -->

```{r}
#| label: ci-interpretation
#| echo: false
check_question(c("Based on a sample", 
                 "we are 95% confident that",
                 "the true mean age of US pennies",
                 "is a single value",
                 "between LB and UB"), 
               type = "in_order", alignment = "vertical")
```
<br>


<!-- 7. Is there evidence from Exploratory Data Analysis that the ideal outdoor temperature of Californians is more than 78? Be sure to cite the evidence, as well as describe why it supplies evidence for the value of the parameter.   -->



#### Can we generalize to the population of interest? 
<!-- Why or why not? If so, explain why. If not, explain why and, if applicable, the population that could be generalized to. -->

```{r}
#| label: generalize
#| echo: false
check_question(answer = "Yes, because we can assume pennies from a bank are a natural random sample.", 
               options = c("Yes, because we can assume pennies from a bank are a natural random sample.", 
                           "Yes, because our sample size is greater than 30.", 
                           "No"), type = "checkbox")
```
<br>



#### To use the model to calculate the confidence interval, a condition/conditions needed to be satisfied. Which condition(s) are they?  
<!-- What if you hadn't met that condition? What would that mean for your conclusion? -->

```{r}
#| label: conditions
#| echo: false
check_question(answer = c("Normality",
                          "Sufficient Sample Size"), 
               options = c("Normality", 
                           "Sufficient Sample Size", 
                           "Random Sample"), 
               type = "checkbox", 
               random_answer_order = TRUE)
```


